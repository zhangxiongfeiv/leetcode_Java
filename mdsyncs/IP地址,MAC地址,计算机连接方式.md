IP地址,MAC地址,计算机连接方式



计算机之间的通信基础

- 需要得知对方的 **IP地址**
- 最终是根据**MAC地址(网卡地址)**,输送数据到网卡，被网卡接收
  - 如果网卡发现数据的目标MAC地址是自己，就会将数据传递给上一层进行处理
  - 如果网卡发现数据的目标MAC地址不是自己，就会将数据丢弃，不会传递给上一层



- 假设 计算机0 知道计算机1 的 IP地址，此时1  ping  2，步骤如下 : 

  - 0 发送 ARP 广播，此广播是为了获取到 2 的MAC地址

    - 0 发送 Broadcast 广播

    ![屏幕快照 2020-10-12 下午3.23.40](https://tva1.sinaimg.cn/large/007S8ZIlly1gjmky4fugyj30t60jwadb.jpg)

    - 1 接收到广播，发现 0 的目标IP地址是自己，此时 1 将 自己的MAC地址通过 ARP协议回传

    ![屏幕快照 2020-10-12 下午3.23.56](https://tva1.sinaimg.cn/large/007S8ZIlly1gjmkz5ech0j30sy0kmgom.jpg)

    - 0 接收到 1 的MAC 地址，可以通过ICMP协议发送数据包

    ![屏幕快照 2020-10-12 下午3.24.26](https://tva1.sinaimg.cn/large/007S8ZIlly1gjml0sulwfj30t80iggon.jpg)

  - 然后通过 ICMP 协议发送数据.



计算机之间的连接方式

- **网线直连**
  - 需要用交叉线 (不是直通线)

- **同轴电缆**
  - 半双工通信
  - 容易冲突
  - 不安全
  - 中间如果断了，所有都瘫了
- **集线器(Hub)**
  - 半双工通信
  - 容易冲突
  - 不安全
  - 跟同轴电缆一样，没有智商
  - 对比同轴电缆的好处：
    - 中间一台机器断了，对其他机器通信没有影响
- **网桥(Bridge)**
  - 能够通过自学习得知每个接口那侧的MAC地址
    - 从而得到隔绝冲突域的作用
- **交换机(Switch)**
  - 相当于多个接口的网桥, 集线器和网桥结合.
  - 全双工通信
  - 比集线器安全
  - 是局域网的最终方案
  - 但是如果跨网段，需要使用路由器Router
- **路由器(Router)**
  - **网线直连，同轴电缆，集线器，网桥，交换机**
    - 连接的设备必须在同一网段
    - 连接的设备必须处于同一广播域
  - **路由器**
    - 可以在不同网段之间转发数据
    - 隔绝广播域
  - 主机发送数据之前，首先会判断目标主机的IP地址跟他是否在同一个网段
    - 同一个网段
      - ARP广播, 通过交换机，集线器等
    - 不在同一个网段
      - 通过路由器转发数据





